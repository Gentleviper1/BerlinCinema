<!doctype html>
<html lang="en">

<head>
    <!-- Required meta tags -->
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
    <title>Screenings - Berlin Cinema</title>
    <!-- Bootstrap CSS -->
    <link rel="stylesheet" href="assets/vendor/bootstrap/css/bootstrap.min.css">
    <link href="assets/vendor/fonts/circular-std/style.css" rel="stylesheet">
    <link rel="stylesheet" href="assets/libs/css/style.css">
    <link rel="stylesheet" href="assets/vendor/fonts/fontawesome/css/fontawesome-all.css">
</head>

<body>
    <div class="dashboard-main-wrapper">
        <!-- ============================================================== -->
        <!-- navbar -->
        <!-- ============================================================== -->
        <div class="dashboard-header">
            <nav class="navbar navbar-expand-lg bg-white fixed-top">
                <a class="navbar-brand" href="index.html">Cinema Admin </a>
                <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarSupportedContent" aria-controls="navbarSupportedContent" aria-expanded="false" aria-label="Toggle navigation">
                    <span class="navbar-toggler-icon"></span>
                </button>
                <div class="collapse navbar-collapse " id="navbarSupportedContent">
                    <ul class="navbar-nav ml-auto navbar-right-top">
                        <li class="nav-item">
                            <div id="custom-search" class="top-search-bar">
                                <input class="form-control" type="text" placeholder="Search...">
                            </div>
                        </li>
                        <li class="nav-item dropdown notification">
                            <a class="nav-link nav-icons" href="#" id="navbarDropdownMenuLink1" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false"><i class="fas fa-fw fa-bell"></i> <span class="indicator"></span></a>
                            <ul class="dropdown-menu dropdown-menu-right notification-dropdown">
                                <li>
                                    <div class="notification-title"> Notification</div>
                                    <div class="notification-list">
                                        <div class="list-group">
                                            <a href="#" class="list-group-item list-group-item-action active">
                                                <div class="notification-info">
                                                    <div class="notification-list-user-img"><img src="assets/images/avatar-2.jpg" alt="" class="user-avatar-md rounded-circle"></div>
                                                    <div class="notification-list-user-block"><span class="notification-list-user-name">Jeremy Rakestraw</span>accepted your invitation to join the team.
                                                        <div class="notification-date">2 min ago</div>
                                                    </div>
                                                </div>
                                            </a>
                                            <a href="#" class="list-group-item list-group-item-action">
                                                <div class="notification-info">
                                                    <div class="notification-list-user-img"><img src="assets/images/avatar-3.jpg" alt="" class="user-avatar-md rounded-circle"></div>
                                                    <div class="notification-list-user-block"><span class="notification-list-user-name">John Abraham </span>is now following you
                                                        <div class="notification-date">2 days ago</div>
                                                    </div>
                                                </div>
                                            </a>
                                            <a href="#" class="list-group-item list-group-item-action">
                                                <div class="notification-info">
                                                    <div class="notification-list-user-img"><img src="assets/images/avatar-4.jpg" alt="" class="user-avatar-md rounded-circle"></div>
                                                    <div class="notification-list-user-block"><span class="notification-list-user-name">Monaan Pechi</span> is watching your main repository
                                                        <div class="notification-date">2 min ago</div>
                                                    </div>
                                                </div>
                                            </a>
                                            <a href="#" class="list-group-item list-group-item-action">
                                                <div class="notification-info">
                                                    <div class="notification-list-user-img"><img src="assets/images/avatar-5.jpg" alt="" class="user-avatar-md rounded-circle"></div>
                                                    <div class="notification-list-user-block"><span class="notification-list-user-name">Jessica Caruso</span>accepted your invitation to join the team.
                                                        <div class="notification-date">2 min ago</div>
                                                    </div>
                                                </div>
                                            </a>
                                        </div>
                                    </div>
                                </li>
                                <li>
                                    <div class="list-footer"> <a href="#">View all notifications</a></div>
                                </li>
                            </ul>
                        </li>
                        <li class="nav-item dropdown connection">
                            <a class="nav-link" href="#" id="navbarDropdown" role="button" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false"> <i class="fas fa-fw fa-th"></i> </a>
                            <ul class="dropdown-menu dropdown-menu-right connection-dropdown">
                                <li>
                                    <div class="row">
                                        <div class="col-xl-4 col-lg-4 col-md-6 col-sm-12 col-12 ">
                                            <a href="#" class="connection-item"><img src="assets/images/github.png" alt=""> <span>Github</span></a>
                                        </div>
                                        <div class="col-xl-4 col-lg-4 col-md-6 col-sm-12 col-12 ">
                                            <a href="#" class="connection-item"><img src="assets/images/dribbble.png" alt=""> <span>Dribbble</span></a>
                                        </div>
                                        <div class="col-xl-4 col-lg-4 col-md-6 col-sm-12 col-12 ">
                                            <a href="#" class="connection-item"><img src="assets/images/dropbox.png" alt=""> <span>Dropbox</span></a>
                                        </div>
                                    </div>
                                    <div class="row">
                                        <div class="col-xl-4 col-lg-4 col-md-6 col-sm-12 col-12 ">
                                            <a href="#" class="connection-item"><img src="assets/images/bitbucket.png" alt=""> <span>Bitbucket</span></a>
                                        </div>
                                        <div class="col-xl-4 col-lg-4 col-md-6 col-sm-12 col-12 ">
                                            <a href="#" class="connection-item"><img src="assets/images/mail_chimp.png" alt=""><span>Mail chimp</span></a>
                                        </div>
                                        <div class="col-xl-4 col-lg-4 col-md-6 col-sm-12 col-12 ">
                                            <a href="#" class="connection-item"><img src="assets/images/slack.png" alt=""> <span>Slack</span></a>
                                        </div>
                                    </div>
                                </li>
                                <li>
                                    <div class="conntection-footer"><a href="#">More</a></div>
                                </li>
                            </ul>
                        </li>
                        <li class="nav-item dropdown nav-user">
                            <a class="nav-link nav-user-img" href="#" id="navbarDropdownMenuLink2" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false"><img src="assets/images/avatar-1.jpg" alt="" class="user-avatar-md rounded-circle"></a>
                            <div class="dropdown-menu dropdown-menu-right nav-user-dropdown" aria-labelledby="navbarDropdownMenuLink2">
                                <div class="nav-user-info">
                                    <h5 class="mb-0 text-white nav-user-name">John Abraham </h5>
                                    <span class="status"></span><span class="ml-2">Available</span>
                                </div>
                                <a class="dropdown-item" href="#"><i class="fas fa-user mr-2"></i>Account</a>
                                <a class="dropdown-item" href="admin-account-settings.html"><i class="fas fa-cog mr-2"></i>Setting</a>
                                <a class="dropdown-item" href="#"><i class="fas fa-power-off mr-2"></i>Logout</a>
                            </div>
                        </li>
                    </ul>
                </div>
            </nav>
        </div>
        <!-- ============================================================== -->
        <!-- end navbar -->
        <!-- ============================================================== -->
        <!-- ============================================================== -->
        <!-- left sidebar -->
        <!-- ============================================================== -->
        <div class="nav-left-sidebar sidebar-dark">
            <div class="menu-list">
                <nav class="navbar navbar-expand-lg navbar-light">
                    <a class="d-xl-none d-lg-none" href="index.html">Admin Dashboard</a>
                    <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarNav" aria-controls="navbarNav" aria-expanded="false" aria-label="Toggle navigation">
                        <span class="navbar-toggler-icon"></span>
                    </button>
                    <div class="collapse navbar-collapse" id="navbarNav">
                        <ul class="navbar-nav flex-column">
                            <li class="nav-divider">
                                Menu
                            </li>
                            <li class="nav-item ">
                                <a class="nav-link " href="index.html" aria-expanded="false" data-target="#submenu-1" aria-controls="submenu-1"><i class="fa fa-fw fa-home"></i>Home <span class="badge badge-success">6</span></a>

                            </li>
                            <li class="nav-item ">
                                <a class="nav-link " href="#" aria-expanded="false" data-target="#submenu-1" aria-controls="submenu-1"><i class="fa fa-fw fa-users"></i>Profile <span class="badge badge-success">6</span></a>
                            </li>
                            <li class="nav-divider">
                                Movies
                            </li>

                            </li>
                            <li class="nav-item">
                                <a class="nav-link" href="Movies.php" aria-expanded="false" data-target="#submenu-2" aria-controls="submenu-2"><i class="fa fa-fw fa-film"></i>Movies</a>

                            </li>
                            <li class="nav-item">
                                <a class="nav-link" href="add-movie.php" aria-expanded="false" data-target="#submenu-3" aria-controls="submenu-3"><i class="fa fa-fw fa-plus-circle"></i>Add Movies</a>
                            </li>
                            <li class="nav-item">
                                <a class="nav-link" href="add-upcoming-movie.php" aria-expanded="false" data-target="#submenu-3" aria-controls="submenu-3"><i class="fa fa-fw fa-plus-circle"></i>Add Upcoming Movie</a>
                            </li>
                            <li class="nav-item">
                                <a class="nav-link" href="movie-details.php" aria-expanded="false" data-target="#submenu-3" aria-controls="submenu-3"><i class="fa fa-fw fa-list"></i>Movies Details</a>
                            </li>

                            <li class="nav-divider">
                                Shows
                            </li>

                            <li class="nav-item">
                                <a class="nav-link" href="view-shows.php" aria-expanded="false" data-target="#submenu-7" aria-controls="submenu-7"><i class="fa fa-fw fa-eye"></i>View Shows </a>

                            </li>
                            <li class="nav-item">
                                <a class="nav-link" href="add-shows.php" aria-expanded="false" data-target="#submenu-8" aria-controls="submenu-8"><i class="fas fa-fw fa-columns"></i>Add Shows</a>
                            <li class="nav-divider">
                                Theatre
                            </li>
                            </li>
                            <li class="nav-item">
                                <a class="nav-link" href="theatre-details.php" aria-expanded="false" data-target="#submenu-9" aria-controls="submenu-9"><i class="fas fa-fw fa-map-marker-alt"></i>Theatre Details</a>

                            </li>
                            <li class="nav-item">
                                <a class="nav-link" href="add-theatre.php" aria-expanded="false" data-target="#submenu-9" aria-controls="submenu-9"><i class="fas fa-fw fa-map"></i>Add Theatre</a>

                            </li>
                            <li class="nav-item">
                                <a class="nav-link" href="screenings.php" aria-expanded="false" data-target="#submenu-10" aria-controls="submenu-10"><i class="fas fa-fw fa-ticket-alt"></i>Screenings</a>

                            </li>
                            <li class="nav-item">
                                <a class="nav-link" href="bookings.php" aria-expanded="false" data-target="#submenu-10" aria-controls="submenu-10"><i class="fa fa-fw fa-book"></i>Bookings</a>

                            </li>
                        </ul>
                    </div>
                </nav>
            </div>
        </div>

        <div class="dashboard-wrapper">
            <div class="container-fluid dashboard-content">
                <div class="row">
                    <div class="col-12">
                        <h1 class="text-center mb-4">Theater Details</h1>
                        <div class="card mb-4">
                            <div class="card-header">
                                <h3 class="card-title">General Details</h3>
                            </div>
                            <div class="card-body">
                                <table class="table table-bordered table-hover">
                                    <tr>
                                        <td class="col-md-6">Theater Name</td>
                                        <td class="col-md-6">Mr.Berlin</td>
                                    </tr>
                                    <tr>
                                        <td>Theater Address</td>
                                        <td>3800 42nd Ave S</td>
                                    </tr>
                                    <tr>
                                        <td>Place</td>
                                        <td>Minneapolis, MN 55406</td>
                                    </tr>
                                    <tr>
                                        <td>State</td>
                                        <td>Los Angelose</td>
                                    </tr>
                                    <tr>
                                        <td>Pin</td>
                                        <td>224450</td>
                                    </tr>
                                </table>
                            </div>
                        </div>

                        <div class="card">
                            <div class="card-header d-flex justify-content-between align-items-center">
                                <h3 class="card-title">Screen Details</h3>
                                <button class="btn btn-sm btn-info" id="addScreenBtn">
                                    <i class="fa fa-plus"></i> Add Screen
                                </button>

                                <!-- Add Screen Modal -->
                                <div class="modal fade" id="addScreenModal" tabindex="-1" role="dialog" aria-labelledby="addScreenModalLabel" aria-hidden="true">
                                    <div class="modal-dialog" role="document">
                                        <div class="modal-content">
                                            <div class="modal-header">
                                                <h5 class="modal-title" id="addScreenModalLabel">Add Screen</h5>
                                                <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                                                    <span aria-hidden="true">&times;</span>
                                                </button>
                                            </div>
                                            <div class="modal-body">
                                                <form id="addScreenForm">
                                                    <div class="form-group">
                                                        <input type="text" name="name" id="sname" placeholder="Screen Name" class="form-control" />
                                                    </div>
                                                    <div class="form-group">
                                                        <input type="number" name="seats" id="sseats" placeholder="Seats" class="form-control" />
                                                    </div>
                                                    <div class="form-group">
                                                        <input type="number" name="charge" id="scharge" placeholder="Ticket Charge" class="form-control" />
                                                    </div>
                                                </form>
                                            </div>
                                            <div class="modal-footer">
                                                <button type="button" class="btn btn-secondary" data-dismiss="modal">Close</button>
                                                <button type="button" class="btn btn-success" id="savescreen">Save</button>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                            <div class="card-body">
                                <table class="table table-bordered table-hover">
                                    <thead>
                                        <tr>
                                            <th class="col-md-1">Slno</th>
                                            <th class="col-md-3">Screen Name</th>
                                            <th class="col-md-1">Seats</th>
                                            <th class="col-md-1">Charge</th>
                                            <th class="col-md-3">Show Time</th>
                                            <th class="col-md-3 text-right">Actions</th>
                                        </tr>
                                    </thead>
                                    <tbody>
                                        <tr>
                                            <td>1</td>
                                            <td>Main Screen</td>
                                            <td>150</td>
                                            <td>$12</td>
                                            <td>10:00 AM, 1:00 PM, 6:00 PM</td>
                                            <td class="text-right">
                                                <button class="btn btn-sm btn-warning addShowTimesBtn">
                                                    <i class="fa fa-plus"></i> Add Show Times
                                                </button>
                                            </td>
                                        </tr>
                                        <tr>
                                            <td>2</td>
                                            <td>VIP Screen</td>
                                            <td>50</td>
                                            <td>$20</td>
                                            <td>11:00 AM, 4:00 PM, 9:00 PM</td>
                                            <td class="text-right">
                                                <button class="btn btn-sm btn-warning addShowTimesBtn">
                                                    <i class="fa fa-plus"></i> Add Show Times
                                                </button>
                                            </td>
                                        </tr>
                                    </tbody>
                                </table>
                            </div>
                        </div>
                    </div>
                </div>
                <!-- Footer -->
                <div class="footer mt-4">
                    <div class="container-fluid">
                        <div class="row">
                            <div class="col-md-6">
                                Copyright © 2025... <a href="#">Berlin Cinema</a> All rights reserved.
                            </div>
                            <div class="col-md-6 text-md-right">
                                <a href="javascript: void(0);">About</a>
                                <a href="javascript: void(0);">Support</a>
                                <a href="javascript: void(0);">Contact Us</a>
                            </div>
                        </div>
                    </div>
                </div>
                <!-- End Footer -->
            </div>
        </div>

    </div>

    <script src="assets/vendor/jquery/jquery-3.3.1.min.js"></script>
    <script src="assets/vendor/bootstrap/js/bootstrap.bundle.js"></script>
    <script src="assets/vendor/slimscroll/jquery.slimscroll.js"></script>
    <script src="assets/libs/js/main-js.js"></script>

    <!-- Add Show Times Modal -->
    <div class="modal fade" id="addShowTimesModal" tabindex="-1" role="dialog" aria-labelledby="addShowTimesModalLabel" aria-hidden="true">
        <div class="modal-dialog" role="document">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title" id="addShowTimesModalLabel">Add Show Times</h5>
                    <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                        <span aria-hidden="true">&times;</span>
                    </button>
                </div>
                <div class="modal-body">
                    <form id="addShowTimesForm">
                        <div class="form-group">
                            <label>Select Movie</label>
                            <select name="movie" class="form-control" id="movieSelect">
                                <option value="">Select Movie</option>
                                <?php
                                $mv = mysqli_query($con, "select * from tbl_movie where status='0'");
                                while ($movie = mysqli_fetch_array($mv)) {
                                    echo '<option value="' . $movie['movie_id'] . '">' . $movie['movie_name'] . '</option>';
                                }
                                ?>
                            </select>
                        </div>
                        <div class="form-group">
                            <label>Select Screen</label>
                            <select name="screen" class="form-control" id="screenSelect">
                                <option value="">Select Screen</option>
                                <?php
                                $sc = mysqli_query($con, "select * from tbl_screens where t_id='" . $_SESSION['theatre'] . "'");
                                while ($screen = mysqli_fetch_array($sc)) {
                                    echo '<option value="' . $screen['screen_id'] . '">' . $screen['screen_name'] . '</option>';
                                }
                                ?>
                            </select>
                        </div>
                        <div class="form-group">
                            <label>Select Show Times</label>
                            <select name="stime[]" class="form-control" id="stimeSelect" multiple>
                                <option value="0">Select Show Times</option>
                            </select>
                        </div>
                        <div class="form-group">
                            <label>Start Date</label>
                            <input type="date" name="sdate" class="form-control" id="startDate" />
                        </div>
                    </form>
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-secondary" data-dismiss="modal">Close</button>
                    <button type="button" class="btn btn-success" id="saveShowTimes">Add Show</button>
                </div>
            </div>
        </div>
    </div>

    <script>
        $(document).ready(function() {
            // Show modal on Add Screen button click
            $('#addScreenBtn').click(function() {
                $('#addScreenModal').modal('show');
            });

            // Handle save button click
            $('#savescreen').click(function() {
                var name = $('#sname').val();
                var seats = $('#sseats').val();
                var charge = $('#scharge').val();

                if (!name || !seats || !charge) {
                    alert('Please fill all fields');
                    return;
                }

                // AJAX call to save screen data to server
                $.ajax({
                    url: 'theatre/pages/add_screen.php',
                    type: 'POST',
                    data: {
                        name: name,
                        seats: seats,
                        charge: charge
                    },
                    success: function(response) {
                        alert('Screen added successfully');
                        $('#addScreenModal').modal('hide');
                        // Optionally, refresh the page or update the screen list dynamically
                    },
                    error: function() {
                        alert('Error adding screen');
                    }
                });
            });

            // Show Add Show Times modal on button click
            $('.addShowTimesBtn').click(function() {
                $('#addShowTimesModal').modal('show');
            });

            // Populate show times on screen select change
            $('#screenSelect').change(function() {
                var screen = $(this).val();
                if (screen) {
                    $.ajax({
                        url: 'theatre/pages/get_screen_dtls.php',
                        type: 'POST',
                        data: {
                            id: screen
                        },
                        dataType: 'html',
                        success: function(data) {
                            $('#stimeSelect').html(data);
                        },
                        error: function() {
                            $('#stimeSelect').html('<option>Error loading show times</option>');
                        }
                    });
                } else {
                    $('#stimeSelect').html('<option>Select Show Times</option>');
                }
            });

            // Handle Add Show Times button click (optional)
            $('#saveShowTimes').click(function() {
                var movie = $('#movieSelect').val();
                var screen = $('#screenSelect').val();
                var stime = $('#stimeSelect').val();
                var sdate = $('#startDate').val();

                if (!movie || !screen || !stime || !sdate) {
                    alert('Please fill all fields');
                    return;
                }

                // AJAX call to save show times to server
                $.ajax({
                    url: 'theatre/pages/add_show_times.php',
                    type: 'POST',
                    data: {
                        movie: movie,
                        screen: screen,
                        stime: stime,
                        sdate: sdate
                    },
                    success: function(response) {
                        alert('Show times added successfully');
                        $('#addShowTimesModal').modal('hide');
                        // Optionally, refresh the page or update the show times dynamically
                    },
                    error: function() {
                        alert('Error adding show times');
                    }
                });
            });
        });
    </script>

    <!--
    <?php
    // add_screen.php
    /*
    if ($_SERVER['REQUEST_METHOD'] === 'POST') {
        $name = $_POST['name'];
        $seats = $_POST['seats'];
        $charge = $_POST['charge'];

        // Validate inputs here

        $con = new mysqli('localhost', 'username', 'password', 'database');
        if ($con->connect_error) {
            die('Connection failed: ' . $con->connect_error);
        }

        $stmt = $con->prepare("INSERT INTO tbl_screens (screen_name, seats, charge) VALUES (?, ?, ?)");
        $stmt->bind_param("sii", $name, $seats, $charge);
        if ($stmt->execute()) {
            echo 'Success';
        } else {
            echo 'Error';
        }
        $stmt->close();
        $con->close();
    }
    */
    ?>

    <?php
    // add_show_times.php
    /*
    if ($_SERVER['REQUEST_METHOD'] === 'POST') {
        $movie = $_POST['movie'];
        $screen = $_POST['screen'];
        $stime = $_POST['stime']; // array of show times
        $sdate = $_POST['sdate'];

        // Validate inputs here

        $con = new mysqli('localhost', 'username', 'password', 'database');
        if ($con->connect_error) {
            die('Connection failed: ' . $con->connect_error);
        }

        foreach ($stime as $time) {
            $stmt = $con->prepare("INSERT INTO tbl_show_times (movie_id, screen_id, show_time, start_date) VALUES (?, ?, ?, ?)");
            $stmt->bind_param("iiss", $movie, $screen, $time, $sdate);
            $stmt->execute();
            $stmt->close();
        }
        $con->close();
        echo 'Success';
    }
    */
    ?>
    -->
</body>

</html>
